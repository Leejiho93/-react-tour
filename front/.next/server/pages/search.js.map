{"version":3,"file":"../pages/search.js","mappings":"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","sources":["webpack://front/./src/pages/search.tsx","webpack://front/external \"@ant-design/icons\"","webpack://front/external \"antd\"","webpack://front/external \"axios\"","webpack://front/external \"immer\"","webpack://front/external \"next-redux-saga\"","webpack://front/external \"next-redux-wrapper\"","webpack://front/external \"next/dist/server/denormalize-page-path.js\"","webpack://front/external \"next/dist/server/image-config.js\"","webpack://front/external \"next/dist/shared/lib/head.js\"","webpack://front/external \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://front/external \"next/dist/shared/lib/mitt.js\"","webpack://front/external \"next/dist/shared/lib/router-context.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://front/external \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://front/external \"next/dist/shared/lib/to-base-64.js\"","webpack://front/external \"next/dist/shared/lib/utils.js\"","webpack://front/external \"next/router\"","webpack://front/external \"react\"","webpack://front/external \"react-helmet\"","webpack://front/external \"react-redux\"","webpack://front/external \"react/jsx-runtime\"","webpack://front/external \"redux\"","webpack://front/external \"redux-devtools-extension\"","webpack://front/external \"redux-saga\"","webpack://front/external \"redux-saga/effects\"","webpack://front/external \"styled-components\"","webpack://front/external \"styled-reset\"","webpack://front/external \"typesafe-actions\""],"sourcesContent":["import { Spin } from 'antd';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'next/router';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { END } from 'redux-saga';\r\nimport {\r\n  PaginationCustom,\r\n  Title,\r\n  TitleWrapper,\r\n  Wrapper,\r\n} from '../../styles/common';\r\nimport SortBox from '../components/SortBox';\r\nimport TourList from '../components/TourList';\r\nimport { RootState } from '../modules';\r\nimport { searchAsync } from '../modules/detail';\r\nimport { loadUserAsync } from '../modules/user';\r\nimport { SagaStore, wrapper } from './_app';\r\n\r\nconst Search: React.FC = () => {\r\n  const router = useRouter();\r\n  const { data, loading } = useSelector(\r\n    (state: RootState) => state.detail.searchResult\r\n  );\r\n  const dispatch = useDispatch();\r\n  const [pageNo, setPageNo] = useState<number>(1);\r\n  const [arrange, setArrange] = useState<'P' | 'Q'>('Q');\r\n  const search = String(router.query.search);\r\n  const { items, totalCount } = data;\r\n  const item = items && items.item;\r\n\r\n  const onChange = useCallback((page) => {\r\n    setPageNo(page);\r\n  }, []);\r\n\r\n  const sortHot = useCallback(() => {\r\n    setArrange('P');\r\n  }, []);\r\n  const sortRecent = useCallback(() => {\r\n    setArrange('Q');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      searchAsync.request({\r\n        search: search,\r\n        pageNo: pageNo,\r\n        arrange: arrange,\r\n      })\r\n    );\r\n  }, [search, pageNo, arrange, dispatch]);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <TitleWrapper>\r\n        <Title>{search}</Title>\r\n      </TitleWrapper>\r\n\r\n      <SortBox arrange={arrange} sortHot={sortHot} sortRecent={sortRecent} />\r\n      <div>\r\n        <Spin spinning={loading}>\r\n          <TourList list={item} />\r\n        </Spin>\r\n\r\n        <PaginationCustom\r\n          total={totalCount}\r\n          showSizeChanger={false}\r\n          defaultPageSize={12}\r\n          onChange={onChange}\r\n          current={pageNo}\r\n        />\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  (store) =>\r\n    async ({ req, query }) => {\r\n      const cookie = req ? req.headers.cookie : '';\r\n      if (axios.defaults.headers) {\r\n        req && cookie\r\n          ? (axios.defaults.headers.Cookie = cookie)\r\n          : (axios.defaults.headers.Cookie = '');\r\n      }\r\n\r\n      store.dispatch(loadUserAsync.request());\r\n      store.dispatch(\r\n        searchAsync.request({\r\n          search: String(query.search),\r\n          pageNo: 1,\r\n          arrange: 'Q',\r\n        })\r\n      );\r\n\r\n      store.dispatch(END);\r\n\r\n      await (store as SagaStore).sagaTask.toPromise();\r\n      return { props: {} };\r\n    }\r\n);\r\n\r\nexport default Search;\r\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"antd\");","module.exports = require(\"axios\");","module.exports = require(\"immer\");","module.exports = require(\"next-redux-saga\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/server/denormalize-page-path.js\");","module.exports = require(\"next/dist/server/image-config.js\");","module.exports = require(\"next/dist/shared/lib/head.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/to-base-64.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-helmet\");","module.exports = require(\"react-redux\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"styled-components\");","module.exports = require(\"styled-reset\");","module.exports = require(\"typesafe-actions\");"],"names":["Spin","axios","useRouter","useCallback","useEffect","useState","useDispatch","useSelector","END","PaginationCustom","Title","TitleWrapper","Wrapper","SortBox","TourList","searchAsync","loadUserAsync","wrapper","Search","router","data","loading","state","detail","searchResult","dispatch","pageNo","setPageNo","arrange","setArrange","search","String","query","items","totalCount","item","onChange","page","sortHot","sortRecent","request","getServerSideProps","store","req","cookie","headers","defaults","Cookie","sagaTask","toPromise","props"],"sourceRoot":""}