{"version":3,"file":"static/chunks/pages/tour-6c75c57f2f750d94d17d.js","mappings":"oPAuBMA,EAAY,CAChB,CAAC,oBAAMC,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,GACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,IACP,CAAC,eAAM,K,KAwHT,UArHuB,WACrB,IACA,GADeC,EAAAA,EAAAA,aACyBC,MAAhCC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,cACf,GAAgCC,EAAAA,EAAAA,eAA6BL,GAAtDM,EAAP,KAAiBC,EAAjB,KACA,GAA4BF,EAAAA,EAAAA,UAAiB,GAAtCG,EAAP,KAAeC,EAAf,KACA,GAA8BJ,EAAAA,EAAAA,UAAoB,KAA3CK,EAAP,KAAgBC,EAAhB,KAEA,GAA0BC,EAAAA,EAAAA,KACxB,SAACC,GAAD,OAAsBA,EAAMC,OAAOC,gBAD7BC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,QAIRC,GAAWC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,WACRb,OAAYP,GACZS,EAAU,KACT,CAACN,KAEJiB,EAAAA,EAAAA,YAAU,WACRX,EAAU,KACT,CAACH,KAEJc,EAAAA,EAAAA,YAAU,WACHhB,GAILc,EACEG,EAAAA,GAAAA,QAAoB,CAClBX,QAASA,EACTJ,SAAUA,EACVF,cAAekB,OAAOlB,GACtBI,OAAQA,OAGX,CAACF,EAAUE,EAAQE,EAASN,EAAec,IAE9C,IAAMK,GAAWC,EAAAA,EAAAA,cAAY,SAACC,GAC5BhB,EAAUgB,KACT,IACGC,GAAiBF,EAAAA,EAAAA,cACrB,SAACG,GAAD,OAAU,WACRpB,EAAYoB,MAEd,IAGIC,GAAUJ,EAAAA,EAAAA,cAAY,WAC1Bb,EAAW,OACV,IACGkB,GAAaL,EAAAA,EAAAA,cAAY,WAC7Bb,EAAW,OACV,IACH,OACE,SAAC,IAAD,WACE,UAAC,KAAD,YACE,SAAC,KAAD,WACE,SAAC,KAAD,UAAQR,OAGV,SAAC,KAAD,WACE,SAAC,EAAA2B,GAAD,UACG/B,EAAUgC,KAAI,SAACC,GAAD,OACb,SAAC,EAAAC,GAAD,CACEC,UAAWF,EAAK,KAAO1B,EAAW,SAAW,GAC7C6B,QAAST,EAAeM,EAAK,IAF/B,SAKGA,EAAK,IAFDA,EAAK,YAQlB,SAAC,IAAD,CAAStB,QAASA,EAASkB,QAASA,EAASC,WAAYA,KACzD,2BACGZ,GAAU,SAAC,IAAD,KAAuB,SAAC,IAAD,CAAUmB,KAAMpB,EAAKqB,MAAML,QAC7D,SAAC,KAAD,CACEM,MAAOtB,EAAKuB,WACZC,iBAAiB,EACjBjB,SAAUA,EACVkB,gBAAiB,GACjBC,QAASlC,c,sBC7HhBmC,OAAOC,SAAWD,OAAOC,UAAY,IAAIC,KAAK,CAC7C,QACA,WACE,OAAO,EAAQ,W","sources":["webpack://_N_E/./src/pages/tour.tsx","webpack://_N_E/?ac3a"],"sourcesContent":["import axios from 'axios';\r\nimport { useRouter } from 'next/router';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { END } from 'redux-saga';\r\nimport {\r\n  Li,\r\n  PaginationCustom,\r\n  Select,\r\n  Title,\r\n  TitleWrapper,\r\n  Ul,\r\n  Wrapper,\r\n} from '../../styles/common';\r\nimport KategorySkeleton from '../components/KategorySkeleton';\r\nimport Layout from '../components/Layout';\r\nimport SortBox from '../components/SortBox';\r\nimport TourList from '../components/TourList';\r\nimport { RootState } from '../modules';\r\nimport { regionAsync } from '../modules/detail';\r\nimport { loadUserAsync } from '../modules/user';\r\nimport { SagaStore, wrapper } from './_app';\r\n\r\nconst areaArray = [\r\n  ['전체', undefined],\r\n  ['서울', 1],\r\n  ['인천', 2],\r\n  ['대전', 3],\r\n  ['대구', 4],\r\n  ['광주', 5],\r\n  ['부산', 6],\r\n  ['울산', 7],\r\n  ['세종', 8],\r\n  ['경기', 31],\r\n  ['강원', 32],\r\n  ['충북', 33],\r\n  ['충남', 34],\r\n  ['경북', 35],\r\n  ['경남', 36],\r\n  ['전북', 37],\r\n  ['전남', 38],\r\n  ['제주', 39],\r\n];\r\n\r\nconst Tour: React.FC = () => {\r\n  const router = useRouter();\r\n  const { title, contentTypeId } = router.query;\r\n  const [areaCode, setAreaCode] = useState<number | undefined>(undefined);\r\n  const [pageNo, setPageNo] = useState<number>(1);\r\n  const [arrange, setArrange] = useState<'P' | 'Q'>('P');\r\n\r\n  const { data, loading } = useSelector(\r\n    (state: RootState) => state.detail.regionResult\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setAreaCode(undefined);\r\n    setPageNo(1);\r\n  }, [title]);\r\n\r\n  useEffect(() => {\r\n    setPageNo(1);\r\n  }, [areaCode]);\r\n\r\n  useEffect(() => {\r\n    if (!contentTypeId) {\r\n      return;\r\n    }\r\n\r\n    dispatch(\r\n      regionAsync.request({\r\n        arrange: arrange,\r\n        areaCode: areaCode,\r\n        contentTypeId: Number(contentTypeId),\r\n        pageNo: pageNo,\r\n      })\r\n    );\r\n  }, [areaCode, pageNo, arrange, contentTypeId, dispatch]);\r\n\r\n  const onChange = useCallback((page) => {\r\n    setPageNo(page);\r\n  }, []);\r\n  const changeAreaCode = useCallback(\r\n    (code) => () => {\r\n      setAreaCode(code);\r\n    },\r\n    []\r\n  );\r\n\r\n  const sortHot = useCallback(() => {\r\n    setArrange('P');\r\n  }, []);\r\n  const sortRecent = useCallback(() => {\r\n    setArrange('Q');\r\n  }, []);\r\n  return (\r\n    <Layout>\r\n      <Wrapper>\r\n        <TitleWrapper>\r\n          <Title>{title}</Title>\r\n        </TitleWrapper>\r\n\r\n        <Select>\r\n          <Ul>\r\n            {areaArray.map((item) => (\r\n              <Li\r\n                className={item[1] === areaCode ? 'active' : ''}\r\n                onClick={changeAreaCode(item[1])}\r\n                key={item[0]}\r\n              >\r\n                {item[0]}\r\n              </Li>\r\n            ))}\r\n          </Ul>\r\n        </Select>\r\n\r\n        <SortBox arrange={arrange} sortHot={sortHot} sortRecent={sortRecent} />\r\n        <div>\r\n          {loading ? <KategorySkeleton /> : <TourList list={data.items.item} />}\r\n          <PaginationCustom\r\n            total={data.totalCount}\r\n            showSizeChanger={false}\r\n            onChange={onChange}\r\n            defaultPageSize={12}\r\n            current={pageNo}\r\n          />\r\n        </div>\r\n      </Wrapper>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps = wrapper.getServerSideProps(\r\n  (store) =>\r\n    async ({ req, query }) => {\r\n      const cookie = req ? req.headers.cookie : '';\r\n\r\n      if (axios.defaults.headers) {\r\n        req && cookie\r\n          ? (axios.defaults.headers.Cookie = cookie)\r\n          : (axios.defaults.headers.Cookie = '');\r\n      }\r\n\r\n      store.dispatch(loadUserAsync.request());\r\n      store.dispatch(\r\n        regionAsync.request({\r\n          contentTypeId: Number(query.contentTypeId),\r\n          arrange: 'P',\r\n          pageNo: 1,\r\n        })\r\n      );\r\n\r\n      store.dispatch(END);\r\n\r\n      await (store as SagaStore).sagaTask.toPromise();\r\n      return { props: {} };\r\n    }\r\n);\r\n\r\nexport default Tour;\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/tour\",\n      function () {\n        return require(\"private-next-pages/tour.tsx\");\n      }\n    ]);\n  "],"names":["areaArray","undefined","useRouter","query","title","contentTypeId","useState","areaCode","setAreaCode","pageNo","setPageNo","arrange","setArrange","useSelector","state","detail","regionResult","data","loading","dispatch","useDispatch","useEffect","regionAsync","Number","onChange","useCallback","page","changeAreaCode","code","sortHot","sortRecent","Ul","map","item","Li","className","onClick","list","items","total","totalCount","showSizeChanger","defaultPageSize","current","window","__NEXT_P","push"],"sourceRoot":""}